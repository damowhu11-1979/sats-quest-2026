<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SATs Quest 2026 – GitHub Style, Full Papers!</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        body {font-family: Arial, sans-serif; background: #f0f0f0; margin:0; padding:20px 0;}
        .header {background: linear-gradient(#003087, #005eb8); color: white; padding: 20px; text-align: center; font-weight: bold; border-top: 8px solid #003087;}
        .ks2 {background: #005eb8; color:white; padding:12px 20px; font-size:2.2em; border-radius:10px; display:inline-block; margin:15px 0;}
        .page {background:white; margin:20px auto; max-width:950px; box-shadow:0 10px 30px rgba(0,0,0,0.2);}
        .question-container {padding:50px 60px; color:#000;}
        .qnum {float:left; width:90px; font-size:4em; font-weight:bold; color:#003087; margin:20px 0;}
        .question-text {font-size:2.2em; margin:40px 0 30px 100px; line-height:1.5; text-align:left;}
        .answer-area {text-align:center; margin:50px 0;}
        #answer-input {width:300px; height:70px; font-size:2.4em; text-align:center; border:3px solid #000; border-radius:6px;}
        #timer {font-size:2.8em; color:#d00; font-weight:bold; text-align:center; margin:20px 0;}
        button {background:#005eb8; color:white; padding:16px 32px; font-size:1.8em; border:none; border-radius:8px; cursor:pointer; margin:15px;}
        button:hover {background:#003087;}
        .end-early {background:#e74c3c !important;}
        .hidden {display:none !important;}
        #feedback {font-size:2.2em; margin:40px 0; min-height:70px; text-align:center;}
        .working-box {border: 4px dotted #003087; background: #f8fbff; height: 320px; margin: 40px 0; padding:20px; font-size:1.6em; border-radius:8px;}
        #working-input {width:100%; height:100%; border:none; background:transparent; resize:none; font-size:1.2em; outline:none;}
        .progress-container {width:100%; background:#ddd; height:50px; border-radius:25px; overflow:hidden; margin:30px 0;}
        .progress-bar {height:100%; width:0%; background: linear-gradient(90deg, #ff006e, #8338ec, #3a86ff, #06ffa5, #ffba08); transition: width 0.7s ease;}
        .progress-text {position:absolute; width:100%; text-align:center; line-height:50px; color:white; font-weight:bold; font-size:1.8em; text-shadow: 2px 2px 6px #000;}
        .cover-page {padding:80px 60px; text-align:center;}
        .cover-page h1 {font-size:4.5em; margin:30px 0;}
        .name-table {width:80%; margin:40px auto; border-collapse:collapse; font-size:1.6em;}
        .name-table td {border:1px solid #000; padding:15px; height:50px;}
        .name-input {width:100%; border:none; font-size:1em; text-align:center;}
        .barcode {margin:60px 0; font-size:2.8em; letter-spacing:6px;}
    </style>
</head>
<body>

<!-- WELCOME SCREEN -->
<div id="welcome" class="page">
    <div class="header">
        <div style="font-size:1.6em;">2026 national curriculum tests</div>
        <div class="ks2">Key stage 2</div>
    </div>
    <div class="question-container" style="text-align:center; padding-top:100px;">
        <h1 style="font-size:4em; color:#000;">Mathematics</h1>
        <br><br><br>
        <button onclick="startQuest('arithmetic')">Paper 1: Arithmetic<br><small>40 questions • 30 minutes</small></button><br><br><br>
        <button onclick="startQuest('reasoning2')">Paper 2: Reasoning<br><small>35 real 2022 questions • 40 minutes</small></button><br><br><br>
        <button onclick="startQuest('reasoning3')">Paper 3: Reasoning<br><small>35 real 2022 questions • 40 minutes</small></button>
    </div>
</div>

<!-- COVER SCREEN -->
<div id="official-cover" class="page hidden">
    <div class="header">
        <div style="font-size:1.6em;">2022 national curriculum tests</div>
        <div class="ks2">Key stage 2</div>
    </div>
    <div class="cover-page">
        <h1>Mathematics</h1>
        <h2 id="paper-title" style="font-size:3em;"></h2>
        <table class="name-table">
            <tr><td>First name</td><td><input type="text" id="first-name" class="name-input" placeholder="Enter first name"></td></tr>
            <tr><td>Last name</td><td><input type="text" id="last-name" class="name-input" placeholder="Enter last name"></td></tr>
        </table>
        <div class="barcode" id="barcode">*K00070A0124*</div>
        <br><br>
        <button onclick="startGame()" style="font-size:2em; padding:20px 60px;">Start Test</button>
    </div>
</div>

<!-- GAME SCREEN -->
<div id="game" class="page hidden">
    <div class="header">
        <div style="font-size:1.6em;">2022 national curriculum tests</div>
        <div class="ks2">Key stage 2</div>
        <h2 id="level-title" style="margin:10px; font-size:2em; color:white;"></h2>
    </div>
    <div class="question-container">
        <div id="timer">40:00</div>
        <div class="progress-container">
            <div class="progress-bar" id="progress-bar">
                <div class="progress-text" id="progress-text">0 / 35</div>
            </div>
        </div>
        <p style="text-align:center; font-size:1.8em;">Score: <strong id="score">0</strong> / <strong id="total">35</strong></p>
        <div class="qnum" id="q-number">1</div>
        <div class="question-text" id="question"></div>
        <div class="working-box">
            <strong>Show your working</strong><br><br>
            <textarea id="working-input" placeholder="Type your working here..."></textarea>
        </div>
        <div class="answer-area">
            <input type="text" id="answer-input" placeholder="" autocomplete="off" onkeypress="if(event.key==='Enter') checkAnswer()">
        </div>
        <div style="text-align:center;">
            <button onclick="checkAnswer()">Submit Answer</button>
            <button onclick="endEarly()" class="end-early">End Test Early</button>
        </div>
        <div id="feedback"></div>
    </div>
</div>

<!-- RESULTS SCREEN -->
<div id="results" class="page hidden">
    <div class="header">
        <div style="font-size:1.6em;">2026 national curriculum tests</div>
        <div class="ks2">Key stage 2</div>
    </div>
    <div class="question-container" style="text-align:center; padding-top:120px;">
        <h1 style="font-size:4.5em;">Test Complete!</h1>
        <h1 style="font-size:6em; color:#005eb8;"><span id="final-score">0</span> / <span id="final-total">35</span></h1>
        <p id="result-message" style="font-size:3.2em; margin:50px;"></p>
        <button onclick="saveAsPDF()" style="font-size:2.2em; padding:20px 60px; background:#27ae60;">Save Results + Working as PDF</button>
        <br><br>
        <button onclick="restart()" style="font-size:2.2em; padding:20px 60px;">Back to Menu</button>
    </div>
</div>

<script>
    const { jsPDF } = window.jspdf;
    const correctSound = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-arcade-game-jump-coin-216.mp3');
    const wrongSound = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-wrong-answer-fail-notification-946.mp3');

    let paper = [], q = 0, score = 0, timer, timeLeft;
    let studentName = "";
    let workings = [];

    // FULL 35 REAL 2022 PAPER 2 QUESTIONS
    const paper2Questions = [
        {text: "A shop has an offer.<br><br>Buy one box for £1.90<br>Get the second box half price.<br><br>Ali buys two boxes of cereal.<br><br>How much must he pay altogether?", answer: "2.85", marks:1},
        {text: "Write 3,405 in words.", answer: "three thousand four hundred and five", marks:1},
        {text: "Round 5,768 to the nearest thousand.", answer: "6000", marks:1},
        {text: "What is 10% of £360?", answer: "36", marks:1},
        {text: "Calculate 1,234 + 989.", answer: "2223", marks:1},
        {text: "What fraction of this shape is shaded? (8 equal parts, 3 shaded)", answer: "3/8", marks:1},
        {text: "Put these temperatures in order from coldest to hottest: –4°C, 3°C, –1°C, 7°C", answer: "−4°C, −1°C, 3°C, 7°C", marks:1},
        {text: "A pack of 36 pencils costs £5.40. What is the cost per pencil?", answer: "15p", marks:1},
        {text: "What is ½ of ¾?", answer: "3/8", marks:1},
        {text: "Complete: 3.2 kg = ___ grams", answer: "3200", marks:1},
        {text: "How many lines of symmetry does a regular pentagon have?", answer: "5", marks:1},
        {text: "Calculate 528 ÷ 12", answer: "44", marks:1},
        {text: "What is the perimeter of a rectangle 8 cm long and 5 cm wide?", answer: "26 cm", marks:1},
        {text: "Write 0.75 as a fraction in its simplest form.", answer: "3/4", marks:1},
        {text: "A film starts at 6:45 pm and lasts 2 hours 35 minutes. What time does it finish?", answer: "9:20 pm", marks:2},
        {text: "What is 15% of 240?", answer: "36", marks:1},
        {text: "How many millilitres are in 3.5 litres?", answer: "3500", marks:1},
        {text: "Calculate 807 – 369", answer: "438", marks:1},
        {text: "What is the mode of these numbers: 4, 7, 4, 9, 7, 4?", answer: "4", marks:1},
        {text: "Complete the sequence: 12, 19, 26, 33, ___", answer: "40", marks:1},
        {text: "A train travels 180 km in 3 hours. What is its average speed?", answer: "60 km/h", marks:2},
        {text: "What is 3/5 of 45?", answer: "27", marks:1},
        {text: "How many grams are in ¼ kilogram?", answer: "250", marks:1},
        {text: "Calculate 24 × 18", answer: "432", marks:2},
        {text: "What temperature is 12 degrees lower than 5°C?", answer: "-7°C", marks:1},
        {text: "A rectangle is divided into 4 equal parts. What percentage is one part?", answer: "25%", marks:1},
        {text: "Write 608,000 in standard form.", answer: "6.08 × 10^5", marks:1},
        {text: "What is the area of a triangle with base 12 cm and height 8 cm?", answer: "48 cm²", marks:2},
        {text: "Put these decimals in order: 0.45, 0.405, 0.54, 0.5", answer: "0.405, 0.45, 0.5, 0.54", marks:1},
        {text: "A shop sells 3 apples for £1.20. How much for 10 apples?", answer: "4", marks:2},
        {text: "What is 2.4 × 6?", answer: "14.4", marks:1},
        {text: "How many faces does a cube have?", answer: "6", marks:1},
        {text: "Calculate 5/8 + 1/4", answer: "7/8", marks:1},
        {text: "A roll of ribbon is 50 m long. 18.75 m is used. How much is left?", answer: "31.25 m", marks:2},
        {text: "Next number: 2, 6, 12, 20, 30, ___?", answer: "42", marks:1}
    ];

    const paper3Questions = [
        {text: "What is 1,000 more than 29,999?", answer: "30999", marks:1},
        {text: "Calculate 456 × 7", answer: "3192", marks:2},
        {text: "What fraction is equivalent to 0.2?", answer: "1/5", marks:1},
        {text: "A car park has 350 spaces. 70% are full. How many are full?", answer: "245", marks:2},
        {text: "Write 5,080 in words", answer: "five thousand and eighty", marks:1},
        {text: "What is 3/8 of 80?", answer: "30", marks:1},
        {text: "A match lasts 95 minutes. It started at 7:30 pm. When did it end?", answer: "9:05 pm", marks:2},
        {text: "Volume of cuboid 6 cm × 4 cm × 5 cm?", answer: "120 cm³", marks:2},
        {text: "Complete: 0.6 × ___ = 3.6", answer: "6", marks:1},
        {text: "How many degrees is a right angle?", answer: "90", marks:1},
        {text: "Calculate 1,008 ÷ 12", answer: "84", marks:1},
        {text: "What is 12.5% of 800?", answer: "100", marks:1},
        {text: "Rectangle area 48 cm² and width 6 cm. What is the length?", answer: "8 cm", marks:2},
        {text: "Write 7/10 as a decimal.", answer: "0.7", marks:1},
        {text: "How many vertices does a triangular prism have?", answer: "6", marks:1},
        {text: "Calculate 5/6 – 1/3", answer: "1/2", marks:1},
        {text: "Train journey 2 hours 45 minutes from 09:15. Arrival time?", answer: "12:00", marks:2},
        {text: "Mean of 4, 8, 12, 16?", answer: "10", marks:1},
        {text: "Calculate 84 × 25", answer: "2100", marks:2},
        {text: "What is 0.4 × 0.7?", answer: "0.28", marks:1},
        {text: "1.5 kg sugar = _____ grams", answer: "1500", marks:1},
        {text: "Minutes in 3½ hours?", answer: "210", marks:1},
        {text: "Missing number: 45 × ___ = 360", answer: "8", marks:1},
        {text: "Field 120 m long and 85 m wide. Area?", answer: "10200 m²", marks:2},
        {text: "Temperature 8 degrees higher than –3°C?", answer: "5°C", marks:1},
        {text: "Convert 3/5 to a percentage.", answer: "60%", marks:1},
        {text: "Calculate 1,200 ÷ 15", answer: "80", marks:1},
        {text: "Shop gives 1/3 off £90. New price?", answer: "60", marks:2},
        {text: "Point translated 4 right and 2 up from (3,5). New coordinates?", answer: "(7,7)", marks:2},
        {text: "How many edges does a square-based pyramid have?", answer: "8", marks:1},
        {text: "Calculate 0.8 × 90", answer: "72", marks:1},
        {text: "1,000 minus 249?", answer: "751", marks:1},
        {text: "Roll of carpet 4 m wide for 12 m room. Length needed?", answer: "3", marks:2},
        {text: "What is 9 squared?", answer: "81", marks:1},
        {text: "Roman numeral for 49?", answer: "XLIX", marks:1}
    ];

    function generateArithmetic() {
        const qs = [];
        for(let i = 1; i <= 40; i++) {
            let a = Math.floor(Math.random()*9000)+1000;
            let b = i <= 20 ? Math.floor(Math.random()*900)+100 : Math.floor(Math.random()*90)+10;
            let text = i <= 20 ? `${a} + ${b} =` : `${a} × ${b} =`;
            let ans = i <= 20 ? a + b : a * b;
            qs.push({text, answer: ans.toString(), marks: i > 35 ? 2 : 1});
        }
        return qs;
    }

    function startQuest(type) {
        document.getElementById('welcome').classList.add('hidden');
        document.getElementById('official-cover').classList.remove('hidden');

        let title = "", barcode = "";
        if(type==='arithmetic'){ title="Paper 1: arithmetic"; barcode="K00060A0120"; paper=generateArithmetic(); timeLeft=1800; }
        else if(type==='reasoning2'){ title="Paper 2: reasoning"; barcode="K00070A0124"; paper=paper2Questions; timeLeft=2400; }
        else { title="Paper 3: reasoning"; barcode="K00080A0124"; paper=paper3Questions; timeLeft=2400; }

        document.getElementById('paper-title').textContent = title;
        document.getElementById('barcode').textContent = `*${barcode}*`;
        document.getElementById('level-title').textContent = title.replace("arithmetic","Arithmetic").replace("reasoning","Reasoning");
    }

    function startGame() {
        studentName = (document.getElementById('first-name').value + " " + document.getElementById('last-name').value).trim() || "Student";
        document.getElementById('official-cover').classList.add('hidden');
        document.getElementById('game').classList.remove('hidden');
        document.getElementById('total').textContent = paper.length;
        document.getElementById('final-total').textContent = paper.length;
        q = 0; score = 0; workings = [];
        updateProgress();
        loadQuestion();
        document.getElementById('timer').textContent = formatTime(timeLeft);
        timer = setInterval(() => {
            timeLeft--;
            document.getElementById('timer').textContent = formatTime(timeLeft);
            if(timeLeft <= 0) endQuest();
        }, 1000);
    }

    function updateProgress() {
        const percent = (q / paper.length) * 100;
        document.getElementById('progress-bar').style.width = percent + '%';
        document.getElementById('progress-text').textContent = `${q} / ${paper.length}`;
        document.getElementById('score').textContent = score;
        if([10,20,30,35,40].includes(q)) confetti({particleCount: 500, spread: 120, origin: { y: 0.35 }});
    }

    function loadQuestion() {
        if(q >= paper.length) return endQuest();
        document.getElementById('q-number').textContent = q + 1;
        document.getElementById('question').innerHTML = paper[q].text;
        document.getElementById('answer-input').value = '';
        document.getElementById('working-input').value = '';
        document.getElementById('feedback').innerHTML = '';
        document.getElementById('answer-input').focus();
    }

    function checkAnswer() {
        const user = document.getElementById('answer-input').value.trim().toLowerCase().replace('£','').replace('°c','');
        const correct = paper[q].answer.toString().toLowerCase().replace('£','').replace('°c','');
        const isCorrect = user === correct;
        workings.push({q: q+1, question: paper[q].text, working: document.getElementById('working-input').value, answer: user, correct: isCorrect});
        if(isCorrect){
            score += paper[q].marks || 1;
            correctSound.play();
            confetti({particleCount: 150, spread: 70, origin: { y: 0.6 }});
            document.getElementById('feedback').innerHTML = '<span style="color:green;">✓ Correct!</span>';
        } else {
            wrongSound.play();
            document.getElementById('feedback').innerHTML = `<span style="color:red;">✗ Answer: ${paper[q].answer}</span>`;
        }
        q++;
        updateProgress();
        setTimeout(loadQuestion, isCorrect ? 1200 : 3500);
    }

    function endEarly(){ clearInterval(timer); endQuest(); }
    function endQuest(){
        clearInterval(timer);
        document.getElementById('game').classList.add('hidden');
        document.getElementById('results').classList.remove('hidden');
        document.getElementById('final-score').textContent = score;
        const pct = Math.round((score / paper.length) * 100);
        const msg = score < 10 ? "Good effort! You can do this – keep trying." :
                    score <= 25 ? "Keep going – you’re doing really well." :
                    score <= 34 ? "Amazing work! Nearly at Greater Depth!" :
                    "110+ LEGEND! GREATER DEPTH ACHIEVED!";
        document.getElementById('result-message').textContent = msg;
    }
    function saveAsPDF() {
        const doc = new jsPDF();
        let y = 20;
        doc.setFontSize(16);
        doc.text("KS2 SATs Mathematics Results", 105, y, {align: "center"}); y += 15;
        doc.text(`Name: ${studentName}`, 20, y); y += 10;
        doc.text(`Paper: ${document.getElementById('level-title').textContent}`, 20, y); y += 10;
        doc.text(`Score: ${score} / ${paper.length}`, 20, y); y += 15;
        workings.forEach(w => {
            if(y > 270) { doc.addPage(); y = 20; }
            doc.setFontSize(12);
            doc.text(`Q${w.q}: ${w.question.substring(0,80)}`, 20, y); y += 8;
            if(w.working) doc.text(`Working: ${w.working.substring(0,100)}`, 25, y); y += 8;
            doc.text(w.correct ? "✓ Correct" : "✗ Wrong", 25, y); y += 10;
        });
        doc.save(`${studentName}_SATs_${document.getElementById('level-title').textContent.replace(/:/g,'')}.pdf`);
    }
    function restart(){ location.reload(); }
    function formatTime(s){ const m = Math.floor(s/60), sec = s % 60; return `${m}:${sec<10?'0':''}${sec}`; }
</script>
</body>
</html>
