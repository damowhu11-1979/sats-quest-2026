<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SATs Quest 2026 ‚Äì INFINITE MODE üêâ</title>
    <style>
        body { font-family: Arial, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #fff; text-align: center; margin: 0; padding: 20px; }
        h1 { font-size: 2.5em; text-shadow: 2px 2px 4px rgba(0,0,0,0.5); }
        .dashboard { background: rgba(0,0,0,0.3); border-radius: 15px; padding: 20px; margin: 20px auto; max-width: 700px; }
        button { background: #ff6b6b; border: none; color: white; padding: 15px 30px; font-size: 1.2em; border-radius: 50px; cursor: pointer; margin: 10px; transition: transform 0.2s; }
        button:hover { transform: scale(1.1); background: #ff5252; }
        #question { font-size: 1.5em; margin: 20px; padding: 20px; background: rgba(255,255,255,0.1); border-radius: 10px; }
        #answer-input { padding: 12px; font-size: 1.3em; border-radius: 8px; border: none; width: 250px; margin: 10px; }
        #timer { font-size: 2.2em; color: #ffd700; margin: 10px; }
        .hidden { display: none; }
        .streak { color: #ffd700; font-weight: bold; font-size: 1.3em; }
        .badge { background: gold; color: black; padding: 8px 15px; border-radius: 30px; margin: 5px; font-weight: bold; }
        #feedback { font-size: 1.4em; margin: 20px; padding: 15px; background: rgba(0,0,0,0.4); border-radius: 10px; }
        .end-early { background: #4CAF50 !important; font-weight: bold; }
    </style>
</head>
<body>
    <h1> SATs Quest 2026 ‚Äì INFINITE MODE! </h1>
    <div class="dashboard">
        <div id="welcome">
            <p>Hero name: <input type="text" id="hero-name" placeholder="Enter name" style="padding:10px; font-size:1.2em;"></p>
            <p>Every game = brand-new questions ‚Äì NEVER repeats!</p>
            <button onclick="startQuest('arithmetic')"> Arithmetic Arena (30 mins ‚Äì 40 marks)</button>
            <button onclick="startQuest('reasoning2')"> Reasoning Paper 2 (40 mins ‚Äì 35 marks)</button>
            <button onclick="startQuest('reasoning3')"> Reasoning Paper 3 (40 mins ‚Äì 35 marks)</button>
        </div>

        <div id="game" class="hidden">
            <h2 id="level-title"></h2>
            <div id="timer">30:00</div>
            <p class="streak">Streak: <span id="streak">0</span> | Score: <span id="score">0</span> / <span id="total">40</span></p>
            <div id="question"></div>
            <input type="text" id="answer-input" placeholder="Type answer" onkeypress="if(event.key==='Enter') checkAnswer()">
            <br><br>
            <button onclick="checkAnswer()">Submit</button>
            <button onclick="getHint()">Hint</button>
            <button onclick="endEarly()" class="end-early"> End Early & Go Home</button>
            <div id="feedback"></div>
            <div id="badges"></div>
        </div>

        <div id="results" class="hidden">
            <h2>Quest Complete! </h2>
            <p>Final Score: <span id="final-score"></span> / <span id="final-total"></span></p>
            <p id="result-message" style="font-size:1.6em;"></p>
            <button onclick="restart()">Back to Home</button>
        </div>
    </div>

    <script>
        let currentPaper = [], currentQ = 0, score = 0, streak = 0, timer, timeLeft;

        function generateArithmetic() {
            const q = [];
            const templates = [
                {q: "___ + {b} = {a}", a: "{a-b}"}, {q: "{a} ‚àí {b} =", a: "{a-b}"},
                {q: "{a} √ó {b} =", a: "{a*b}"},
                {q: "{a} √∑ {b} =", a: "{a/b}"},
                {q: "{p}% of {n} =", a: "{p*n/100}"},
                {q: "{f} of {n} =", a: "{f*n}"},
                {q: "{a} √∑ {b} = (show method)", a: "{a/b}", marks:2, method:true},
                {q: "{a} √ó {b} = (show method)", a: "{a*b}", marks:2, method:true},
            ];

            for(let i=1; i<=40; i++){
                const t = templates[Math.floor(Math.random()*templates.length)];
                const a = Math.floor(Math.random()*9999)+100;
                const b = Math.floor(Math.random()*99)+2;
                const p = [5,10,15,20,25,30,40,50,75,90][Math.floor(Math.random()*10)];
                const n = Math.floor(Math.random()*800)+100;
                const f = ['1/2','1/4','3/4','1/5','2/5','3/5','1/10','3/10','1/3','2/3'][Math.random()*10|0];
                let question = t.q.replace('{a}',a).replace('{b}',b).replace('{p}',p).replace('{n}',n).replace('{f}',f);
                let answer = eval(t.a.replace('{a}',a).replace('{b}',b).replace('{p}',p).replace('{n}',n).replace('{f}',eval(f)));
                q.push({
                    q: question,
                    a: answer.toString().replace('.0',''),
                    marks: t.marks||1,
                    method: t.method||false
                });
            }
            return q;
        }

        function generateReasoning() {
            const templates = [
                "Round {n} to the nearest hundred.", "What is 10% of ¬£{n}?", "Calculate {a} + {b}", "What is {a} ‚àí {b}",
                "What is 25% of {n}?", "How many grams in {k} kg?", "How many ml in {l} litres?",
                "What time is {h} hours {m} minutes after {time}?", "What is the area of a rectangle {l} cm by {w} cm?",
                "What is the perimeter of a square with side {s} cm?", "Calculate {a} √ó {b}",
                "What is {f} of {n}?", "What is the next number: {seq}?", "What is the mean of {numbers}?",
                "How many vertices does a cuboid have?", "How many faces on a square-based pyramid?",
                "What is 15% of {n}?", "A sale: 20% off ¬£{p}. New price?", "What is 12.5% of {n}?"
            ];
            const q = [];
            for(let i=0; i<35; i++){
                let t = templates[Math.floor(Math.random()*templates.length)];
                let numbers = Array(4).fill().map(()=>Math.floor(Math.random()*100)+10).join(", ");
                let seq = Array(5).fill().map((_,i)=> i*7+3).join(", ") + ", ___";
                let time = ["7:15 pm","09:30","11:10"][Math.random()*3|0];
                let h = Math.floor(Math.random()*4)+1; let m = [15,30,45][Math.random()*3|0];
                let n = Math.floor(Math.random()*900)+100;
                let a = Math.floor(Math.random()*999)+100; let b = Math.floor(Math.random()*99)+2;
                let question = Math.floor(Math.random()*20)+5; let w = Math.floor(Math.random()*15)+5;
                let s = Math.floor(Math.random()*20)+5;
                let k = Math.random()*9+1; let l = Math.random()*9+1;
                let p = [80,150,200,300][Math.random()*4|0];
                let filled = t.replace(/{n}/g,n).replace(/{a}/g,a).replace(/{b}/g,b).replace(/{l}/g,l).replace(/{w}/g,w).replace(/{s}/g,s)
                               .replace(/{k}/g,k.toFixed(1)).replace(/{l}/g,l.toFixed(1)).replace(/{p}/g,p)
                               .replace(/{h}/g,h).replace(/{m}/g,m).replace(/{time}/g,time)
                               .replace(/{numbers}/g,numbers).replace(/{seq}/g,seq);
                q.push({q: filled, a: "auto", marks: Math.random()<0.3?2:1});
            }
            return q;
        }

        function startQuest(type) {
            document.getElementById('welcome').classList.add('hidden');
            document.getElementById('game').classList.remove('hidden');
            currentPaper = type==='arithmetic' ? generateArithmetic() : generateReasoning();
            currentQ = 0; score = 0; streak = 0;
            document.getElementById('total').textContent = currentPaper.length;
            document.getElementById('level-title').innerHTML = type==='arithmetic' ? 'Arithmetic Arena <br><small>40 fresh questions</small>' : 'Reasoning Paper '+(type==='reasoning2'?'2':'3');
            loadQuestion();
            timeLeft = type==='arithmetic'?1800:2400;
            document.getElementById('timer').textContent = formatTime(timeLeft);
            timer = setInterval(()=>{timeLeft--; document.getElementById('timer').textContent = formatTime(timeLeft); if(timeLeft<=0) endQuest();},1000);
        }

        function loadQuestion() {
            if(currentQ >= currentPaper.length) return endQuest();
            const q = currentPaper[currentQ];
            document.getElementById('question').innerHTML = (currentQ+1) + '. ' + q.q + (q.method?'<br><small>Show method for full marks!</small>':'');
            document.getElementById('answer-input').value = '';
            document.getElementById('feedback').innerHTML = '';
        }

        function checkAnswer() {
            const user = document.getElementById('answer-input').value.trim().replace(/,/g,'').toLowerCase();
            const q = currentPaper[currentQ];
            let correct = false;
            if(q.a === "auto"){
                // Auto-calculate the answer from the question text
                try {
                    const calc = q.q.split('=')[0].join('').trim();
                    const result = eval(calc);
                    correct = user === result.toString() || user === result.toFixed(1) || user === result.toFixed(2);
                } catch(e) { correct = false; }
            } else {
                correct = q.a.toString().toLowerCase() === user;
            }
            const earned = correct ? q.marks : 0;
            score += earned; streak = correct ? streak+1 : 0;
            document.getElementById('score').textContent = score;
            document.getElementById('streak').textContent = streak;
            document.getElementById('feedback').innerHTML = correct ? ` +${earned} mark${earned>1?'s':''}` : ` Answer: ${q.a}`;
            if(streak % 5 === 0 && streak > 0) awardBadge('Streak Monster ');
            currentQ++;
            setTimeout(loadQuestion, correct?1200:3000);
        }

        function getHint() {
            document.getElementById('feedback').innerHTML = ' Think place value / common denominators!';
        }

        function endEarly() { clearInterval(timer); endQuest(); }

        function endQuest() {
            clearInterval(timer);
            document.getElementById('game').classList.add('hidden');
            document.getElementById('results').classList.remove('hidden');
            document.getElementById('final-score').textContent = score;
            document.getElementById('final-total').textContent = currentPaper.length;
            const percent = Math.round((score/currentPaper.length)*100);
            document.getElementById('result-message').textContent = percent >= 90 ? '110+ SCALED SCORE ‚Äì LEGEND!' : 'Keep going ‚Äì every paper is new!';
        }

        function restart() { document.getElementById('results').classList.add('hidden'); document.getElementById('welcome').classList.remove('hidden'); }

        function formatTime(s) { const m = Math.floor(s/60); const sec = s%60; return m + ':' + (sec<10?'0':'') + sec; }
        function awardBadge(name) { document.getElementById('badges').innerHTML += `<span class="badge">${name}</span> `; }
    </script>
</body>
</html>
